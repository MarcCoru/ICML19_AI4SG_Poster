\documentclass[a0]{tumposter}

\usepackage[english]{babel}

\usepackage{blindtext}

\usepackage{multicol}
\usepackage{amsmath}
\usepackage{graphicx}

% for printing fontsizes
\usepackage{printlen}
\uselengthunit{mm}

\input{preamble.tex}

\usepackage[utf8]{inputenc}

\title{
	Early Classification for Agricultural Monitoring \\ from Satellite Time Series
	}
	
\author{
	Marc Rußwurm, Romain Tavenard, Sebastien Lefevre, Marco Körner
	}

\header{
	Remote Sensing Technology \\
	TUM Department of Civil, Geo and Environmental Engineering \\
	Technical University of Munich
	}
	
\begin{document}
\maketitle

\begin{minipage}[t]{.65\textwidth}
	
	\section{Objective}
	
	
	\begin{tikzpicture}[scale=16]
	\node[label={[name=sat,text height=1.5ex,text depth=.25ex]Satellite Data}, anchor=north](x) at (-1,0){$\M{X} = (\V{x}_0, \V{x}_1, \dots , \V{x}_T)$};
	\node[below=of x, label={[yshift=1.3em, xshift=1.8em, font=\tiny, text=white]below:ESA Sentinel 2 Satellite}](s2){\includegraphics[width=13cm]{images/sentinel2}};
	
	
	\node[below=of s2, text width=13cm](eqbox){
		
		is continuously collected in regular temporal intervals.
	};
	
	\node[label={[name=cm,text height=1.5ex,text depth=.25ex]{\color{ecolor}Early} {\color{ccolor}Early} Model}, anchor=north](f) at (0,0){ $\V{y}, {\color{tumbluedark}\deltat} = f(\M{x})$};
	
	
	\node[label={[name=ctm,text height=1.5ex,text depth=.25ex]Crop Type Labels}, anchor=north](y) at (1,0){
		$\V{y} = \small (y_\text{corn}, y_\text{barley}, \dots) \in \mathbb{R}^{13}$
	};
	\node[below=of y, label=below:IGN crop type labels](labels){\includegraphics[width=13cm]{images/parcels}};
	\node[below=of labels, text width=12cm](lbls){
		\small
		\begin{itemize}\setlength\itemsep{.1em}
		\item European Common Agricultural Policy (CAP)
		\item collected yearly in entire Europe
		\item slowly made publicly available
		\item today, gathered on a national basis
		\item in future harmonized within Europe's INSPIRE directive
		\end{itemize}
	};
	
	\draw[thin, -{Stealth[scale=.5]}, tumblue] (x) -- (f);
	\draw[thin, -{Stealth[scale=.5]}, tumblue] (f) -- (y);
	
	\scoped[on background layer]
	{
		\node[fit=(ctm)(lbls), fill=tumbluelight!20, inner sep=1em, rounded corners]{};
%		\node[fit=(cm)(foodsec), fill=tumorange!20, inner sep=1em, rounded corners]{};
		\node[fit=(sat)(eqbox), fill=tumbluelight!20, inner sep=1em, rounded corners]{};
	}	
	
	\end{tikzpicture}
	
	
	\section{Method}
	
	\begin{tikzpicture}[xscale=20]
	
		\node[fill=tumbluelight!20, rounded corners] at (0,0){
			\input{images/backprop_stopping_rule.tikz}
			\backpropstoppingrulefull
		};
		
		\node[text width=25cm, fill=tumbluelight!20, rounded corners](math) at (1,0){
			
			
			\begin{equation*}
			P(t;\deltauptot) = \deltat \cdot \prod_{\tau=0}^{t-1} 1 - p_\tau \, .
			\label{eq:pts}
			\end{equation*}
			\begin{equation*}
			\mathcal{L}(\V{x}, \V{y}) = \sum_{t=0}^T P(t;\deltauptot) \mathcal{L}_t(\xuptot, \V{y}) \, .
			\label{eq:ptloss}
			\end{equation*}
			
			\begin{equation*}
			\mathcal{L}_t(\xuptot, \V{y} ; \alpha) = \alpha \mathcal{L}_c (\xuptot, \V{y}) - (1 - \alpha)\mathcal{R}_e(t, \ycorrect_t)
			\label{eq:earlyrewardloss}
			\end{equation*} 
			
			\begin{equation*}
			\mathcal{R}_e(t, \ycorrect_t) = \ycorrect_t \left(1 - \frac{t}{T}\right) \,.
			\label{eq:earlyrewardterm}
			\end{equation*}
			
		};
		
	\end{tikzpicture}
	
	
\end{minipage}
\hfill
\begin{minipage}[t]{.32\textwidth}
	\section{Results}
	
	\input{images/loss-accuracyplots.tikz}
	\figearlyreward

	\subsection{Qualitative Example}
	
	
	\input{images/example.tikz}
	
	\subsection{Parameterizing stopping times during training}
	
	
	\input{images/trainingstoppingclasses.tikz}
	
	\subsection{Balancing Earliness and Accuracy}
	\begin{table}
		
		\scriptsize
		\hspace{0em}\begin{tabular}{lcccccc}
			\toprule\small
			\textbf{$\alpha$} & accuracy & $\meantstop$  & precision & recall & $f_1$ & $\kappa$ \\
			\cmidrule(lr){0-0}\cmidrule(lr){1-1}\cmidrule(lr){2-2}\cmidrule(lr){3-3}\cmidrule(lr){4-4}\cmidrule(lr){5-5}\cmidrule(lr){6-6}\cmidrule(lr){7-7}
			.0 & .25 $\pm$ .22 & .10 $\pm$ .17 & .19 $\pm$ .20 & .25 $\pm$ .17 & .16 $\pm$ .20 & .12 $\pm$ .19 \\
			.2 & .81 $\pm$ .03 & .40 $\pm$ .02 & .70 $\pm$ .01 & .74 $\pm$ .01 & .71 $\pm$ .01 & .71 $\pm$ .04 \\
			.4 & .80 $\pm$ .09 & .47 $\pm$ .03 & .71 $\pm$ .02 & .74 $\pm$ .01 & .71 $\pm$ .02 & .71 $\pm$ .10 \\
			.6 & .85 $\pm$ .02 & .88 $\pm$ .07 & .73 $\pm$ .04 & .74 $\pm$ .03 & .73 $\pm$ .03 & .77 $\pm$ .03 \\
			.8 & .84 $\pm$ .01 & .93 $\pm$ .05 & .72 $\pm$ .02 & .75 $\pm$ .01 & .73 $\pm$ .02 & .76 $\pm$ .02 \\
			1.0 & .83 $\pm$ .03 & 1.00 $\pm$ .00 & .72 $\pm$ .03 & .75 $\pm$ .01 & .72 $\pm$ .03 & .75 $\pm$ .04 \\
			\bottomrule
		\end{tabular}
		%	\caption{Varying the weighting factor $\alpha$ for \emph{early reward} loss formulation (\cref{sec:earlynessreward}).}
		%	\label{tab:alpha}
		
	\end{table}
	
	\subsection{Classboxplots}
	
	\input{images/classboxplots.tikz}
	
\end{minipage}

% footer environment places \hfill and sets fontsize
\begin{footer}
	\begin{multicols}{2}
		\textbf{Technical University of Munich}\\
		TUM Department of Civil, Geo and Environmental Engineering \\
		Remote Sensing Technology, Computer Vision Research Group \\
		Arcisstr. 21, 80333 Munich, Germany \\
		www.lmf.bgu.tum.de/vision
	\vfill\columnbreak
	%right
		\textbf{Authors} \\
		Marc Rußwurm, Technical University of Munich, Chair of Remote Sensing Technology \\
		Romain Tavenard, IRISA, LETG-Rennes \\
		Sebastien Lefevre, UBS IRISA Obelix  \\
		Marco Körner, Technical University of Munich, Chair of Remote Sensing Technology
	\vfill
	\end{multicols}
\end{footer}

\end{document}